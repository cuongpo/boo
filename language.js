// Language translations
const translations = {
    en: {
        // Navigation
        "nav_pricing": "Pricing",
        "nav_preview": "Preview Book",
        "nav_free_cover": "Create Free Cover",
        "nav_start": "Start Now",
        
        // Hero section
        "hero_title": "Personalized Storybooks for Kids",
        "hero_subtitle": "Turn Your Child Into the Main Character - Nurturing Dreams From the First Page!",
        "hero_feature1": "36 vibrant illustrated pages: High-quality hand-drawn illustrations that stimulate imagination",
        "hero_feature2": "Bilingual English - Vietnamese: Helps children learn a foreign language naturally",
        "hero_feature3": "Free shipping: Fast 3-5 day delivery nationwide",
        "hero_cta": "Create your child's book",
        "hero_price": "From $2.99",
        
        // Book examples section
        "preview_title": "Preview Sample Book",
        "preview_button": "View Sample Book Details",
        
        // Child star section
        "child_star_title": "Character images created from your child's photos",
        "child_star_desc": "AI technology transforms your child's photos into vibrant story characters, with customizable outfits and settings!",
        "child_star_cta": "Create a free cover page",
        
        // Story made section
        "story_made_title": "Stories created especially for your child",
        "story_made_desc": "Choose lessons, locations, and themes that suit your family to create a story that truly resonates with your child.",
        "story_made_cta": "Create a free cover page",
        
        // Gift treasure section
        "gift_title": "A Meaningful Gift",
        "gift_desc": "Give your child a beautiful book that brings joy and strengthens family bonds. Perfect for bedtime reading.",
        "gift_cta": "Create a free cover page",
        
        // Simple fun section
        "simple_fun_title": "Simple and Fun!",
        "step1_title": "Create a Story",
        "step1_desc": "With just a few simple details about your child, AI will create a unique story",
        "step2_title": "Unique Illustrations",
        "step2_desc": "Each page is illustrated individually, tailored to your child's story",
        "step3_title": "Receive the Book at Home",
        "step3_desc": "Books are printed in high quality and delivered to your family",
        
        // Pricing section
        "pricing_title": "Exclusive Offer Packages",
        "digital_badge": "Digital Only Package",
        "digital_title": "1 Digital Story",
        "digital_price": "$2.99",
        "digital_feature1": "1 unique story",
        "digital_feature2": "Digital version (PDF)",
        "digital_feature3": "Viewable on all devices",
        "digital_cta": "Choose Package",
        
        "basic_badge": "Basic Package",
        "basic_title": "1 Story",
        "basic_price": "$9.99",
        "basic_feature1": "1 unique story",
        "basic_feature2": "Premium hardcover",
        "basic_feature3": "Free shipping",
        "basic_cta": "Choose Package",
        
        "premium_badge": "Premium Package",
        "premium_title": "2 Stories",
        "premium_price": "$17.99",
        "premium_feature1": "2 unique stories",
        "premium_feature2": "Premium hardcover",
        "premium_feature3": "Free shipping",
        "premium_feature4": "Digital versions included",
        "premium_cta": "Choose Package",
        
        // CTA section
        "final_cta": "Create your child's book now",
        "final_price": "From $2.99",
        
        // Footer
        "footer_tagline": "Personalized storybooks for your little one!",
        "footer_about": "About Us",
        "footer_story": "Our Story",
        "footer_support": "Customer Support",
        "footer_account": "My Account",
        "footer_contact": "Contact Support",
        "footer_social": "Social Media",
        "footer_terms": "Terms of Use",
        "footer_privacy": "Privacy Policy",
        "footer_copyright": "2025 Boo Boo",
        
        // Book example page
        "book_title": "The Magical Adventure",
        "book_intro": "Join our hero on an exciting journey through magical lands, meeting new friends and learning important lessons along the way.",
        "page_of": "Page",
        "of_pages": "of",
        "prev_page": "Previous",
        "next_page": "Next",
        "create_book": "Create Book For Your Child"
    },
    vi: {
        // Navigation
        "nav_pricing": "Bảng Giá",
        "nav_preview": "Xem Trước Sách",
        "nav_free_cover": "Tạo thử trang bìa miễn phí",
        "nav_start": "Bắt Đầu Ngay",
        
        // Hero section
        "hero_title": "Truyện Tranh Cá nhân hoá cho bé",
        "hero_subtitle": "Biến Bé Thành Nhân Vật Chính - Nuôi Dưỡng Ước Mơ Từ Trang Sách Đầu Tiên!",
        "hero_feature1": "36 trang minh họa sống động: Tranh vẽ tay chất lượng cao, kích thích trí tưởng tượng",
        "hero_feature2": "Song ngữ Anh - Việt: Giúp bé làm quen với ngoại ngữ một cách tự nhiên",
        "hero_feature3": "Miễn phí vận chuyển: Giao hàng nhanh 3-5 ngày toàn quốc",
        "hero_cta": "Tạo sách của bé",
        "hero_price": "Từ 49.000đ",
        
        // Book examples section
        "preview_title": "Xem Trước Sách Mẫu",
        "preview_button": "Xem Chi Tiết Sách Mẫu",
        
        // Child star section
        "child_star_title": "Hình ảnh nhân vật được tạo từ hình ảnh của bé",
        "child_star_desc": "Công nghệ AI biến ảnh bé thành nhân vật chính sinh động trong truyện, từ trang phục đến bối cảnh đều được tùy chỉnh theo ý thích!",
        "child_star_cta": "Tạo thử trang bìa miễn phí",
        
        // Story made section
        "story_made_title": "Câu chuyện được tạo riêng cho bé",
        "story_made_desc": "Chọn những bài học, địa điểm và chủ đề phù hợp với gia đình bạn, tạo nên một câu chuyện thực sự có ý nghĩa với bé.",
        "story_made_cta": "Tạo thử trang bìa miễn phí",
        
        // Gift treasure section
        "gift_title": "Món quà ý nghĩa",
        "gift_desc": "Tặng cho beb một cuốn sách đẹp, mang lại niềm vui và gắn kết gia đình. Hoàn hảo cho những giờ đọc truyện trước khi đi ngủ.",
        "gift_cta": "Tạo thử trang bìa miễn phí",
        
        // Simple fun section
        "simple_fun_title": "Đơn giản và thú vị!",
        "step1_title": "Tạo câu chuyện",
        "step1_desc": "Chỉ cần vài thông tin đơn giản về bé, AI sẽ tạo ra câu chuyện độc đáo",
        "step2_title": "Minh hoạ độc đáo",
        "step2_desc": "Mỗi trang sách được minh hoạ riêng, phù hợp với câu chuyện của bé",
        "step3_title": "Nhận sách tại nhà",
        "step3_desc": "Sách được in chất lượng cao và giao tận nơi cho gia đình",
        
        // Pricing section
        "pricing_title": "Combo Ưu Đãi Độc Quyền",
        "digital_badge": "Gói Only Digital",
        "digital_title": "1 Truyện Digital",
        "digital_price": "49.000đ",
        "digital_feature1": "1 câu chuyện độc đáo",
        "digital_feature2": "Bản kỹ thuật số (PDF)",
        "digital_feature3": "Xem được trên mọi thiết bị",
        "digital_cta": "Chọn Gói",
        
        "basic_badge": "Gói Cơ Bản",
        "basic_title": "1 Truyện",
        "basic_price": "149.000đ",
        "basic_feature1": "1 câu chuyện độc đáo",
        "basic_feature2": "Bìa cứng cao cấp",
        "basic_feature3": "Miễn phí vận chuyển",
        "basic_cta": "Chọn Gói",
        
        "premium_badge": "Gói Premium",
        "premium_title": "2 Truyện",
        "premium_price": "249.000đ",
        "premium_feature1": "2 câu chuyện độc đáo",
        "premium_feature2": "Bìa cứng cao cấp",
        "premium_feature3": "Miễn phí vận chuyển",
        "premium_feature4": "Bản kỹ thuật số kèm theo",
        "premium_cta": "Chọn Gói",
        
        // CTA section
        "final_cta": "Tạo sách của bé ngay",
        "final_price": "Từ 49.000đ",
        
        // Footer
        "footer_tagline": "Sách truyện cá nhân hoá cho bé yêu của bạn!",
        "footer_about": "Về Chúng Tôi",
        "footer_story": "Câu chuyện của chúng tôi",
        "footer_support": "Hỗ Trợ Khách Hàng",
        "footer_account": "Tài khoản của tôi",
        "footer_contact": "Liên hệ hỗ trợ",
        "footer_social": "Mạng Xã Hội",
        "footer_terms": "Điều khoản sử dụng",
        "footer_privacy": "Chính sách bảo mật",
        "footer_copyright": "2025 Boo Boo",
        
        // Book example page
        "book_title": "Cuộc Phiêu Lưu Diệu Kỳ",
        "book_intro": "Hãy cùng nhân vật chính của chúng ta trong một hành trình thú vị qua những vùng đất kỳ diệu, gặp gỡ những người bạn mới và học hỏi những bài học quan trọng trên đường đi.",
        "page_of": "Trang",
        "of_pages": "của",
        "prev_page": "Trước",
        "next_page": "Tiếp",
        "create_book": "Tạo Sách Cho Bé"
    }
};

// Default language
let currentLanguage = localStorage.getItem('language') || 'vi';

// Function to set the language
function setLanguage(language) {
    if (!translations[language]) {
        console.error(`Language ${language} not supported`);
        return;
    }
    
    currentLanguage = language;
    localStorage.setItem('language', language);
    
    // Update all elements with data-i18n attribute
    document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.getAttribute('data-i18n');
        if (translations[language][key]) {
            // Check if the element is an input with placeholder
            if (element.tagName === 'INPUT' && element.hasAttribute('placeholder')) {
                element.placeholder = translations[language][key];
            } 
            // Check for special attributes like title
            else if (element.hasAttribute('data-i18n-attr')) {
                const attr = element.getAttribute('data-i18n-attr');
                element.setAttribute(attr, translations[language][key]);
            } 
            // Default: set inner text
            else {
                element.textContent = translations[language][key];
            }
        }
    });
    
    // Update the language switcher
    document.querySelectorAll('.language-switcher .language').forEach(langBtn => {
        langBtn.classList.remove('active');
        if (langBtn.getAttribute('data-lang') === language) {
            langBtn.classList.add('active');
        }
    });
}

// Initialize language on page load
document.addEventListener('DOMContentLoaded', () => {
    // Create language switcher if it doesn't exist
    if (!document.querySelector('.language-switcher')) {
        const header = document.querySelector('header nav');
        if (header) {
            const languageSwitcher = document.createElement('div');
            languageSwitcher.className = 'language-switcher';
            
            const viBtn = document.createElement('button');
            viBtn.className = 'language';
            viBtn.setAttribute('data-lang', 'vi');
            viBtn.textContent = 'VI';
            viBtn.title = 'Tiếng Việt';
            viBtn.addEventListener('click', () => setLanguage('vi'));
            
            const enBtn = document.createElement('button');
            enBtn.className = 'language';
            enBtn.setAttribute('data-lang', 'en');
            enBtn.textContent = 'EN';
            enBtn.title = 'English';
            enBtn.addEventListener('click', () => setLanguage('en'));
            
            languageSwitcher.appendChild(viBtn);
            languageSwitcher.appendChild(enBtn);
            
            // Insert before the nav-links
            const navLinks = header.querySelector('.nav-links');
            header.insertBefore(languageSwitcher, navLinks);
        }
    }
    
    // Set initial language
    setLanguage(currentLanguage);
});
